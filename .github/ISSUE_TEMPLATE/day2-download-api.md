# [Day 2] λ‹¤μ΄λ΅λ“ API κµ¬ν„

## π“‹ μ‘μ—… κ°μ”
λ‹¤μ΄λ΅λ“ μ‹μ‘, μƒνƒ μ΅°ν, νμΌ λ‹¤μ΄λ΅λ“ APIλ¥Ό κµ¬ν„ν•©λ‹λ‹¤.

## π― λ©ν‘
- μ‘μ—… κ΄€λ¦¬ μ‹μ¤ν… κµ¬ν„
- λ‹¤μ΄λ΅λ“ API μ—”λ“ν¬μΈνΈ κµ¬ν„
- λ°±κ·ΈλΌμ΄λ“ μ‘μ—… μ²λ¦¬

## β… μ‘μ—… λ‚΄μ©

### 1. μ‘μ—… κ΄€λ¦¬ μ‹μ¤ν… (`tasks.py`)
- [ ] Task ID μƒμ„± λ΅μ§ (UUID)
- [ ] μ‘μ—… μƒνƒ κ΄€λ¦¬ (in-memory dict)
  - pending, downloading, processing, completed, failed
- [ ] μ‘μ—… μ •λ³΄ μ €μ¥ κµ¬μ΅°
- [ ] μ‘μ—… μ΅°ν/μ—…λ°μ΄νΈ ν—¬νΌ ν•¨μ
- [ ] μ„μ‹ νμΌ λ° μ¶λ ¥ λ””λ ‰ν† λ¦¬ κ΄€λ¦¬

### 2. λ‹¤μ΄λ΅λ“ μ‹μ‘ API
- [ ] `POST /api/v1/download` μ—”λ“ν¬μΈνΈ
- [ ] μ”μ²­ μ ν¨μ„± κ²€μ‚¬
- [ ] λ°±κ·ΈλΌμ΄λ“ μ‘μ—… μƒμ„±
- [ ] Task ID λ°ν™
- [ ] μ—λ¬ μ²λ¦¬

### 3. λ°±κ·ΈλΌμ΄λ“ λ‹¤μ΄λ΅λ“ μ‘μ—…
- [ ] `BackgroundTasks` μ‚¬μ©
- [ ] κΈ°μ΅΄ `Downloader` ν΄λμ¤ ν†µν•©
- [ ] CLI μµμ… λ³€ν™
- [ ] μ§„ν–‰λ¥  μ½λ°± κµ¬ν„
- [ ] μ‘μ—… μƒνƒ μλ™ μ—…λ°μ΄νΈ
- [ ] λ™μμƒ μ •λ³΄ μ €μ¥
- [ ] νμΌ κ²½λ΅ μ €μ¥

### 4. μƒνƒ μ΅°ν API
- [ ] `GET /api/v1/download/{task_id}/status` μ—”λ“ν¬μΈνΈ
- [ ] μ‘μ—… μ •λ³΄ λ°ν™
- [ ] μ§„ν–‰λ¥  μ •λ³΄ ν¬ν•¨
- [ ] λ™μμƒ μ •λ³΄ ν¬ν•¨
- [ ] νμΌ μ •λ³΄ ν¬ν•¨ (μ™„λ£ μ‹)

### 5. νμΌ λ‹¤μ΄λ΅λ“ API
- [ ] `GET /api/v1/download/{task_id}/file` μ—”λ“ν¬μΈνΈ
- [ ] `FileResponse` μ‚¬μ©
- [ ] Content-Disposition ν—¤λ” μ„¤μ •
- [ ] νμΌ μ΅΄μ¬ μ—¬λ¶€ ν™•μΈ
- [ ] μ—λ¬ μ²λ¦¬

## π§ ν…μ¤νΈ λ°©λ²•

### μ „μ²΄ ν”λ΅μ° ν…μ¤νΈ
```bash
# 1. λ‹¤μ΄λ΅λ“ μ‹μ‘
curl -X POST http://localhost:8000/api/v1/download \
  -H "Content-Type: application/json" \
  -d '{
    "url": "https://www.youtube.com/watch?v=dQw4w9WgXcQ",
    "options": {"quality": "720p"}
  }'

# 2. μƒνƒ μ΅°ν
curl http://localhost:8000/api/v1/download/{task_id}/status

# 3. νμΌ λ‹¤μ΄λ΅λ“
curl -O http://localhost:8000/api/v1/download/{task_id}/file
```

### Swagger UI
- http://localhost:8000/docs

## π“ μμƒ μ‚°μ¶λ¬Ό

### μƒμ„±λ  νμΌ
```
src/youtube_downloader/web/
β”β”€β”€ tasks.py          # μ‘μ—… κ΄€λ¦¬ μ‹μ¤ν… (μ‹ κ·)
β””β”€β”€ api.py            # API μ—”λ“ν¬μΈνΈ μ¶”κ°€
```

### API μ—”λ“ν¬μΈνΈ
- `POST /api/v1/download`: λ‹¤μ΄λ΅λ“ μ‹μ‘
- `GET /api/v1/download/{task_id}/status`: μƒνƒ μ΅°ν
- `GET /api/v1/download/{task_id}/file`: νμΌ λ‹¤μ΄λ΅λ“

### μ‘μ—… μƒνƒ
- `pending`: λ€κΈ° μ¤‘
- `downloading`: λ‹¤μ΄λ΅λ“ μ¤‘
- `processing`: ν›„μ²λ¦¬ μ¤‘
- `completed`: μ™„λ£
- `failed`: μ‹¤ν¨

## π“ μ°Έκ³  λ¬Έμ„
- [μ‘μ—… κ³„νμ„](../docs/web/01-μ›Ή-μΈν„°νμ΄μ¤-μ‘μ—…-κ³„νμ„.md)
- [API λ…μ„Έμ„](../docs/web/02-API-λ…μ„Έμ„.md)
- [κ°λ° λ΅λ“λ§µ](../docs/web/04-κ°λ°-λ΅λ“λ§µ.md)

## β±οΈ μμƒ μ†μ” μ‹κ°„
**8μ‹κ°„** (1μΌ)

## π·οΈ Labels
`enhancement`, `web-interface`, `backend`, `day-2`

## π“ μ°μ„ μμ„
**High** - ν•µμ‹¬ λ‹¤μ΄λ΅λ“ κΈ°λ¥

## β”οΈ μ™„λ£ μ΅°κ±΄
- [ ] λ¨λ“  API μ—”λ“ν¬μΈνΈκ°€ μ •μƒ λ™μ‘
- [ ] Swagger UIμ—μ„ μ „μ²΄ ν”λ΅μ° ν…μ¤νΈ μ™„λ£
- [ ] μ§„ν–‰λ¥ μ΄ μ‹¤μ‹κ°„μΌλ΅ μ—…λ°μ΄νΈλ¨
- [ ] νμΌ λ‹¤μ΄λ΅λ“κ°€ μ •μƒ λ™μ‘
- [ ] μ—λ¬ μ²λ¦¬κ°€ μ μ ν κµ¬ν„λ¨
- [ ] μ»¤λ°‹ μ™„λ£

## π”— κ΄€λ ¨ μ΄μ
- μ΄μ „: #1 [Day 1] μ›Ή μΈν„°νμ΄μ¤ λ°±μ—”λ“ κΈ°μ΄ μ„¤μ •
- λ‹¤μ: #[Day 3] WebSocket λ° μ‹¤μ‹κ°„ μ§„ν–‰λ¥ 
