# 유튜브 동영상 다운로드 CLI 프로그램 작업 계획서

## 📋 프로젝트 개요

### 목적
파이썬 기반의 유튜브 동영상 다운로드 CLI(Command Line Interface) 프로그램을 개발하여 사용자가 터미널에서 간편하게 유튜브 동영상을 다운로드할 수 있도록 합니다.

### 주요 기능
- 유튜브 동영상 URL을 입력받아 다운로드
- 다양한 해상도 및 포맷 선택 (MP4, MP3 등)
- 재생목록(Playlist) 다운로드 지원
- 진행률 표시
- 다운로드 경로 지정
- 메타데이터 저장 (제목, 설명, 썸네일 등)

---

## 🛠 기술 스택

### 핵심 라이브러리
- **yt-dlp**: 유튜브 동영상 다운로드 엔진
- **click**: CLI 인터페이스 구축
- **rich**: 터미널 UI 및 진행률 표시
- **pydantic**: 설정 및 데이터 검증

### 개발 환경
- **Python**: 3.13+
- **의존성 관리**: UV
- **코드 품질**: ruff (린터 & 포매터)
- **타입 체킹**: mypy

---

## 📁 프로젝트 구조

```
YoutubeDownloaderCli/
├── src/
│   └── youtube_downloader/
│       ├── __init__.py
│       ├── cli.py              # CLI 진입점
│       ├── downloader.py       # 다운로드 로직
│       ├── config.py           # 설정 관리
│       ├── utils.py            # 유틸리티 함수
│       └── models.py           # 데이터 모델
├── tests/
│   ├── __init__.py
│   ├── test_downloader.py
│   └── test_cli.py
├── docs/
│   ├── 01-작업-계획서.md
│   ├── 02-프로젝트-개요.md
│   ├── 03-기술-스택.md
│   ├── 04-개발-가이드.md
│   └── 05-사용자-가이드.md
├── downloads/                  # 기본 다운로드 경로
├── .gitignore
├── .python-version
├── pyproject.toml
├── README.md
└── main.py
```

---

## 🎯 개발 단계

### Phase 1: 프로젝트 설정 (1일)
- [x] UV로 프로젝트 초기화
- [ ] 프로젝트 구조 생성
- [ ] 의존성 설치 및 설정
- [ ] 개발 도구 설정 (ruff, mypy)
- [ ] Git 설정 및 .gitignore 업데이트

### Phase 2: 핵심 기능 개발 (3일)
- [ ] **다운로더 모듈 개발**
  - [ ] yt-dlp 래퍼 클래스 구현
  - [ ] 단일 동영상 다운로드 기능
  - [ ] 포맷 선택 기능
  - [ ] 진행률 콜백 구현
  
- [ ] **CLI 인터페이스 개발**
  - [ ] Click 기반 명령어 구조 설계
  - [ ] 기본 명령어 구현 (download, list-formats)
  - [ ] 옵션 및 플래그 정의
  - [ ] Rich를 활용한 UI 구현

- [ ] **설정 관리**
  - [ ] 기본 설정 파일 구조
  - [ ] 사용자 설정 로드/저장
  - [ ] 환경 변수 지원

### Phase 3: 고급 기능 개발 (2일)
- [ ] 재생목록 다운로드 기능
- [ ] 오디오 전용 다운로드 (MP3 변환)
- [ ] 썸네일 및 메타데이터 저장
- [ ] 다운로드 이력 관리
- [ ] 에러 처리 및 재시도 로직

### Phase 4: 테스트 및 문서화 (2일)
- [ ] 단위 테스트 작성
- [ ] 통합 테스트 작성
- [ ] 사용자 가이드 작성
- [ ] API 문서 작성
- [ ] README 업데이트

### Phase 5: 배포 준비 (1일)
- [ ] 패키징 설정
- [ ] PyPI 배포 준비
- [ ] 실행 파일 생성 (선택사항)
- [ ] CI/CD 설정 (선택사항)

---

## 📦 의존성 목록

### 프로덕션 의존성
```toml
dependencies = [
    "yt-dlp>=2024.1.0",
    "click>=8.1.0",
    "rich>=13.7.0",
    "pydantic>=2.5.0",
    "pydantic-settings>=2.1.0",
]
```

### 개발 의존성
```toml
[tool.uv]
dev-dependencies = [
    "pytest>=7.4.0",
    "pytest-cov>=4.1.0",
    "ruff>=0.1.0",
    "mypy>=1.7.0",
]
```

---

## 🎨 CLI 인터페이스 설계

### 기본 명령어 구조
```bash
# 단일 동영상 다운로드
ytdl download <URL> [OPTIONS]

# 재생목록 다운로드
ytdl download <PLAYLIST_URL> --playlist

# 오디오만 다운로드
ytdl download <URL> --audio-only

# 사용 가능한 포맷 확인
ytdl list-formats <URL>

# 설정 관리
ytdl config [show|set|reset]
```

### 주요 옵션
- `--output, -o`: 다운로드 경로 지정
- `--format, -f`: 비디오 포맷 선택
- `--quality, -q`: 화질 선택 (best, 1080p, 720p, 480p 등)
- `--audio-only`: 오디오만 다운로드
- `--playlist`: 재생목록 다운로드
- `--metadata`: 메타데이터 저장
- `--thumbnail`: 썸네일 다운로드

---

## ✅ 검증 계획

### 자동화 테스트
1. **단위 테스트**
   ```bash
   uv run pytest tests/ -v
   ```
   - 다운로더 모듈 테스트
   - 설정 관리 테스트
   - 유틸리티 함수 테스트

2. **코드 품질 검사**
   ```bash
   uv run ruff check .
   uv run mypy src/
   ```

### 수동 테스트
1. **기본 다운로드 테스트**
   - 단일 동영상 다운로드 확인
   - 다양한 포맷 다운로드 테스트
   - 진행률 표시 확인

2. **고급 기능 테스트**
   - 재생목록 다운로드
   - 오디오 전용 다운로드
   - 에러 처리 확인

3. **사용성 테스트**
   - CLI 명령어 직관성 확인
   - 도움말 메시지 검토
   - 에러 메시지 명확성 확인

---

## 🚀 마일스톤

| 단계 | 기간 | 주요 산출물 |
|------|------|------------|
| Phase 1 | 1일 | 프로젝트 설정 완료 |
| Phase 2 | 3일 | 핵심 기능 구현 |
| Phase 3 | 2일 | 고급 기능 구현 |
| Phase 4 | 2일 | 테스트 및 문서 |
| Phase 5 | 1일 | 배포 준비 |
| **총계** | **9일** | **배포 가능한 CLI 프로그램** |

---

## 📝 참고사항

### 주의사항
- 유튜브 서비스 약관 준수
- 저작권 보호 콘텐츠 다운로드 주의
- API 변경에 대한 대응 방안 마련

### 향후 개선 사항
- GUI 버전 개발
- 다중 플랫폼 지원 (Vimeo, Twitch 등)
- 동시 다운로드 기능
- 다운로드 스케줄링
- 웹 인터페이스 추가

---

## 📚 관련 문서
- [프로젝트 개요](./02-프로젝트-개요.md)
- [기술 스택](./03-기술-스택.md)
- [개발 가이드](./04-개발-가이드.md)
- [사용자 가이드](./05-사용자-가이드.md)
