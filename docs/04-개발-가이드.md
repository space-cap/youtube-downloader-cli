# ê°œë°œ ê°€ì´ë“œ

## ğŸš€ ì‹œì‘í•˜ê¸°

### ì‚¬ì „ ìš”êµ¬ì‚¬í•­
- Python 3.13 ì´ìƒ
- UV íŒ¨í‚¤ì§€ ê´€ë¦¬ì
- Git

### í™˜ê²½ ì„¤ì •

#### 1. ì €ì¥ì†Œ í´ë¡ 
```bash
git clone <repository-url>
cd YoutubeDownloaderCli
```

#### 2. UV ì„¤ì¹˜ (ì•„ì§ ì„¤ì¹˜í•˜ì§€ ì•Šì€ ê²½ìš°)
```bash
# Windows (PowerShell)
powershell -c "irm https://astral.sh/uv/install.ps1 | iex"

# macOS/Linux
curl -LsSf https://astral.sh/uv/install.sh | sh
```

#### 3. ì˜ì¡´ì„± ì„¤ì¹˜
```bash
# í”„ë¡œë•ì…˜ ì˜ì¡´ì„±
uv pip install -e .

# ê°œë°œ ì˜ì¡´ì„± í¬í•¨
uv pip install -e ".[dev]"
```

#### 4. ê°œë°œ ë„êµ¬ í™•ì¸
```bash
# Ruff ë²„ì „ í™•ì¸
uv run ruff --version

# Mypy ë²„ì „ í™•ì¸
uv run mypy --version

# Pytest ë²„ì „ í™•ì¸
uv run pytest --version
```

---

## ğŸ“ í”„ë¡œì íŠ¸ êµ¬ì¡°

```
YoutubeDownloaderCli/
â”œâ”€â”€ src/
â”‚   â””â”€â”€ youtube_downloader/
â”‚       â”œâ”€â”€ __init__.py         # íŒ¨í‚¤ì§€ ì´ˆê¸°í™”
â”‚       â”œâ”€â”€ cli.py              # CLI ì§„ì…ì  ë° ëª…ë ¹ì–´
â”‚       â”œâ”€â”€ downloader.py       # ë‹¤ìš´ë¡œë“œ ë¡œì§
â”‚       â”œâ”€â”€ config.py           # ì„¤ì • ê´€ë¦¬
â”‚       â”œâ”€â”€ models.py           # ë°ì´í„° ëª¨ë¸
â”‚       â””â”€â”€ utils.py            # ìœ í‹¸ë¦¬í‹° í•¨ìˆ˜
â”œâ”€â”€ tests/
â”‚   â”œâ”€â”€ __init__.py
â”‚   â”œâ”€â”€ test_downloader.py      # ë‹¤ìš´ë¡œë” í…ŒìŠ¤íŠ¸
â”‚   â”œâ”€â”€ test_cli.py             # CLI í…ŒìŠ¤íŠ¸
â”‚   â””â”€â”€ conftest.py             # Pytest ì„¤ì •
â”œâ”€â”€ docs/                       # ë¬¸ì„œ
â”œâ”€â”€ downloads/                  # ê¸°ë³¸ ë‹¤ìš´ë¡œë“œ ê²½ë¡œ
â”œâ”€â”€ .gitignore
â”œâ”€â”€ .python-version
â”œâ”€â”€ pyproject.toml              # í”„ë¡œì íŠ¸ ì„¤ì •
â”œâ”€â”€ README.md
â””â”€â”€ main.py                     # ì§„ì…ì  (ê°œë°œìš©)
```

---

## ğŸ›  ê°œë°œ ì›Œí¬í”Œë¡œìš°

### 1. ìƒˆ ê¸°ëŠ¥ ê°œë°œ

#### ë¸Œëœì¹˜ ìƒì„±
```bash
git checkout -b feature/new-feature-name
```

#### ì½”ë“œ ì‘ì„±
```python
# src/youtube_downloader/downloader.py

from typing import Optional
import yt_dlp
from rich.progress import Progress

class Downloader:
    """ìœ íŠœë¸Œ ë™ì˜ìƒ ë‹¤ìš´ë¡œë”"""
    
    def __init__(self, output_dir: str = "./downloads"):
        self.output_dir = output_dir
    
    def download(self, url: str, quality: str = "best") -> bool:
        """
        ë™ì˜ìƒ ë‹¤ìš´ë¡œë“œ
        
        Args:
            url: ìœ íŠœë¸Œ ë™ì˜ìƒ URL
            quality: í™”ì§ˆ (best, 1080p, 720p ë“±)
            
        Returns:
            ì„±ê³µ ì—¬ë¶€
        """
        ydl_opts = {
            'format': quality,
            'outtmpl': f'{self.output_dir}/%(title)s.%(ext)s',
        }
        
        try:
            with yt_dlp.YoutubeDL(ydl_opts) as ydl:
                ydl.download([url])
            return True
        except Exception as e:
            print(f"Error: {e}")
            return False
```

### 2. ì½”ë“œ í’ˆì§ˆ ê²€ì‚¬

#### ìë™ í¬ë§¤íŒ…
```bash
# Ruffë¡œ ì½”ë“œ í¬ë§¤íŒ…
uv run ruff format .
```

#### ë¦°íŒ…
```bash
# ë¬¸ì œ í™•ì¸
uv run ruff check .

# ìë™ ìˆ˜ì • ê°€ëŠ¥í•œ ë¬¸ì œ í•´ê²°
uv run ruff check --fix .
```

#### íƒ€ì… ê²€ì‚¬
```bash
# Mypyë¡œ íƒ€ì… ê²€ì‚¬
uv run mypy src/youtube_downloader
```

### 3. í…ŒìŠ¤íŠ¸ ì‘ì„±

#### ë‹¨ìœ„ í…ŒìŠ¤íŠ¸ ì˜ˆì‹œ
```python
# tests/test_downloader.py

import pytest
from youtube_downloader.downloader import Downloader

def test_downloader_initialization():
    """ë‹¤ìš´ë¡œë” ì´ˆê¸°í™” í…ŒìŠ¤íŠ¸"""
    downloader = Downloader(output_dir="./test_downloads")
    assert downloader.output_dir == "./test_downloads"

def test_download_invalid_url():
    """ì˜ëª»ëœ URL ì²˜ë¦¬ í…ŒìŠ¤íŠ¸"""
    downloader = Downloader()
    result = downloader.download("invalid-url")
    assert result is False

@pytest.mark.integration
def test_download_real_video():
    """ì‹¤ì œ ë™ì˜ìƒ ë‹¤ìš´ë¡œë“œ í…ŒìŠ¤íŠ¸ (í†µí•© í…ŒìŠ¤íŠ¸)"""
    downloader = Downloader()
    # ì§§ì€ í…ŒìŠ¤íŠ¸ ë™ì˜ìƒ ì‚¬ìš©
    result = downloader.download("https://www.youtube.com/watch?v=jNQXAC9IVRw")
    assert result is True
```

#### í…ŒìŠ¤íŠ¸ ì‹¤í–‰
```bash
# ëª¨ë“  í…ŒìŠ¤íŠ¸ ì‹¤í–‰
uv run pytest

# íŠ¹ì • íŒŒì¼ë§Œ í…ŒìŠ¤íŠ¸
uv run pytest tests/test_downloader.py

# ì»¤ë²„ë¦¬ì§€ í¬í•¨
uv run pytest --cov=src/youtube_downloader --cov-report=html

# í†µí•© í…ŒìŠ¤íŠ¸ ì œì™¸ (ë¹ ë¥¸ í…ŒìŠ¤íŠ¸)
uv run pytest -m "not integration"
```

### 4. ì»¤ë°‹ ë° í‘¸ì‹œ

```bash
# ë³€ê²½ì‚¬í•­ ìŠ¤í…Œì´ì§•
git add .

# ì»¤ë°‹ (ì˜ë¯¸ìˆëŠ” ë©”ì‹œì§€ ì‘ì„±)
git commit -m "feat: Add video download functionality"

# í‘¸ì‹œ
git push origin feature/new-feature-name
```

---

## ğŸ“ ì½”ë”© ì»¨ë²¤ì…˜

### ë„¤ì´ë° ê·œì¹™
- **í´ë˜ìŠ¤**: PascalCase (`VideoDownloader`)
- **í•¨ìˆ˜/ë³€ìˆ˜**: snake_case (`download_video`)
- **ìƒìˆ˜**: UPPER_SNAKE_CASE (`DEFAULT_QUALITY`)
- **Private**: ì–¸ë”ìŠ¤ì½”ì–´ ì ‘ë‘ì‚¬ (`_internal_method`)

### íƒ€ì… íŒíŒ…
```python
from typing import Optional, List, Dict

def download_videos(
    urls: List[str],
    quality: str = "best",
    output_dir: Optional[str] = None
) -> Dict[str, bool]:
    """
    ì—¬ëŸ¬ ë™ì˜ìƒ ë‹¤ìš´ë¡œë“œ
    
    Args:
        urls: ë‹¤ìš´ë¡œë“œí•  URL ë¦¬ìŠ¤íŠ¸
        quality: í™”ì§ˆ ì„¤ì •
        output_dir: ì¶œë ¥ ë””ë ‰í† ë¦¬ (Noneì´ë©´ ê¸°ë³¸ê°’ ì‚¬ìš©)
        
    Returns:
        URLë³„ ì„±ê³µ ì—¬ë¶€ ë”•ì…”ë„ˆë¦¬
    """
    results = {}
    for url in urls:
        results[url] = download_single_video(url, quality, output_dir)
    return results
```

### Docstring ìŠ¤íƒ€ì¼ (Google Style)
```python
def complex_function(param1: str, param2: int) -> bool:
    """
    í•¨ìˆ˜ì˜ ê°„ë‹¨í•œ ì„¤ëª…
    
    ë” ìì„¸í•œ ì„¤ëª…ì´ í•„ìš”í•œ ê²½ìš° ì—¬ê¸°ì— ì‘ì„±í•©ë‹ˆë‹¤.
    ì—¬ëŸ¬ ì¤„ë¡œ ì‘ì„±í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
    
    Args:
        param1: ì²« ë²ˆì§¸ íŒŒë¼ë¯¸í„° ì„¤ëª…
        param2: ë‘ ë²ˆì§¸ íŒŒë¼ë¯¸í„° ì„¤ëª…
        
    Returns:
        ë°˜í™˜ê°’ ì„¤ëª…
        
    Raises:
        ValueError: ì˜ëª»ëœ ì…ë ¥ê°’ì¸ ê²½ìš°
        IOError: íŒŒì¼ ì‘ì—… ì‹¤íŒ¨ ì‹œ
        
    Examples:
        >>> complex_function("test", 42)
        True
    """
    pass
```

---

## ğŸ”§ ì£¼ìš” ëª¨ë“ˆ ê°œë°œ ê°€ì´ë“œ

### CLI ëª¨ë“ˆ (`cli.py`)

```python
import click
from rich.console import Console
from .downloader import Downloader

console = Console()

@click.group()
@click.version_option(version="0.1.0")
def cli():
    """ìœ íŠœë¸Œ ë‹¤ìš´ë¡œë” CLI"""
    pass

@cli.command()
@click.argument('url')
@click.option('--quality', '-q', default='best', help='ë¹„ë””ì˜¤ í™”ì§ˆ')
@click.option('--output', '-o', default='./downloads', help='ì¶œë ¥ ë””ë ‰í† ë¦¬')
def download(url: str, quality: str, output: str):
    """ë™ì˜ìƒ ë‹¤ìš´ë¡œë“œ"""
    console.print(f"[cyan]ë‹¤ìš´ë¡œë“œ ì‹œì‘: {url}[/cyan]")
    
    downloader = Downloader(output_dir=output)
    success = downloader.download(url, quality)
    
    if success:
        console.print("[green]âœ“ ë‹¤ìš´ë¡œë“œ ì™„ë£Œ![/green]")
    else:
        console.print("[red]âœ— ë‹¤ìš´ë¡œë“œ ì‹¤íŒ¨[/red]")

if __name__ == '__main__':
    cli()
```

### ì„¤ì • ëª¨ë“ˆ (`config.py`)

```python
from pydantic import BaseModel, Field
from pydantic_settings import BaseSettings
from pathlib import Path

class DownloadConfig(BaseModel):
    """ë‹¤ìš´ë¡œë“œ ì„¤ì •"""
    quality: str = Field(default="best", description="ê¸°ë³¸ í™”ì§ˆ")
    output_dir: Path = Field(default=Path("./downloads"), description="ì¶œë ¥ ë””ë ‰í† ë¦¬")
    audio_only: bool = Field(default=False, description="ì˜¤ë””ì˜¤ë§Œ ë‹¤ìš´ë¡œë“œ")

class Settings(BaseSettings):
    """ì• í”Œë¦¬ì¼€ì´ì…˜ ì„¤ì •"""
    download: DownloadConfig = DownloadConfig()
    
    class Config:
        env_file = ".env"
        env_nested_delimiter = "__"

# ì‹±ê¸€í†¤ ì¸ìŠ¤í„´ìŠ¤
settings = Settings()
```

### ë°ì´í„° ëª¨ë¸ (`models.py`)

```python
from pydantic import BaseModel, HttpUrl
from typing import Optional
from datetime import datetime

class VideoInfo(BaseModel):
    """ë™ì˜ìƒ ì •ë³´"""
    url: HttpUrl
    title: str
    duration: int  # ì´ˆ ë‹¨ìœ„
    uploader: str
    upload_date: Optional[datetime] = None
    thumbnail_url: Optional[HttpUrl] = None

class DownloadResult(BaseModel):
    """ë‹¤ìš´ë¡œë“œ ê²°ê³¼"""
    video_info: VideoInfo
    success: bool
    file_path: Optional[str] = None
    error_message: Optional[str] = None
```

---

## ğŸ› ë””ë²„ê¹…

### ë¡œê¹… ì„¤ì •
```python
import logging

# ë¡œê±° ì„¤ì •
logging.basicConfig(
    level=logging.DEBUG,
    format='%(asctime)s - %(name)s - %(levelname)s - %(message)s'
)

logger = logging.getLogger(__name__)

# ì‚¬ìš© ì˜ˆì‹œ
logger.debug("ë””ë²„ê·¸ ë©”ì‹œì§€")
logger.info("ì •ë³´ ë©”ì‹œì§€")
logger.warning("ê²½ê³  ë©”ì‹œì§€")
logger.error("ì—ëŸ¬ ë©”ì‹œì§€")
```

### ë””ë²„ê±° ì‚¬ìš©
```bash
# Python ë””ë²„ê±°ë¡œ ì‹¤í–‰
python -m pdb src/youtube_downloader/cli.py download <URL>

# VS Codeì—ì„œ ë””ë²„ê¹…
# .vscode/launch.json ì„¤ì • í›„ F5
```

---

## ğŸ“¦ ë¹Œë“œ ë° ë°°í¬

### ë¡œì»¬ ì„¤ì¹˜
```bash
# ê°œë°œ ëª¨ë“œë¡œ ì„¤ì¹˜
uv pip install -e .

# ì´ì œ ytdl ëª…ë ¹ì–´ ì‚¬ìš© ê°€ëŠ¥
ytdl --help
```

### íŒ¨í‚¤ì§€ ë¹Œë“œ
```bash
# ë¹Œë“œ ë„êµ¬ ì„¤ì¹˜
uv pip install build

# íŒ¨í‚¤ì§€ ë¹Œë“œ
python -m build

# dist/ í´ë”ì— .whl ë° .tar.gz ìƒì„±ë¨
```

### PyPI ë°°í¬ (ì„ íƒì‚¬í•­)
```bash
# Twine ì„¤ì¹˜
uv pip install twine

# TestPyPIì— ì—…ë¡œë“œ (í…ŒìŠ¤íŠ¸)
twine upload --repository testpypi dist/*

# PyPIì— ì—…ë¡œë“œ (í”„ë¡œë•ì…˜)
twine upload dist/*
```

---

## ğŸ” ë¬¸ì œ í•´ê²°

### ì¼ë°˜ì ì¸ ë¬¸ì œ

#### 1. UV ëª…ë ¹ì–´ë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŒ
```bash
# PATHì— UV ì¶”ê°€
# Windows: í™˜ê²½ ë³€ìˆ˜ì— %USERPROFILE%\.cargo\bin ì¶”ê°€
# macOS/Linux: ~/.bashrc ë˜ëŠ” ~/.zshrcì— ì¶”ê°€
export PATH="$HOME/.cargo/bin:$PATH"
```

#### 2. ì˜ì¡´ì„± ì¶©ëŒ
```bash
# ê°€ìƒ í™˜ê²½ ì¬ìƒì„±
rm -rf .venv
uv venv
uv pip install -e ".[dev]"
```

#### 3. í…ŒìŠ¤íŠ¸ ì‹¤íŒ¨
```bash
# ìºì‹œ í´ë¦¬ì–´ í›„ ì¬ì‹¤í–‰
uv run pytest --cache-clear
```

---

## ğŸ“š ì¶”ê°€ ë¦¬ì†ŒìŠ¤

### ê³µì‹ ë¬¸ì„œ
- [yt-dlp ë¬¸ì„œ](https://github.com/yt-dlp/yt-dlp)
- [Click ë¬¸ì„œ](https://click.palletsprojects.com/)
- [Rich ë¬¸ì„œ](https://rich.readthedocs.io/)
- [Pydantic ë¬¸ì„œ](https://docs.pydantic.dev/)

### ì»¤ë®¤ë‹ˆí‹°
- GitHub Issues: ë²„ê·¸ ë¦¬í¬íŠ¸ ë° ê¸°ëŠ¥ ìš”ì²­
- Discussions: ì§ˆë¬¸ ë° í† ë¡ 

---

## ğŸ“š ê´€ë ¨ ë¬¸ì„œ
- [ì‘ì—… ê³„íšì„œ](./01-ì‘ì—…-ê³„íšì„œ.md)
- [í”„ë¡œì íŠ¸ ê°œìš”](./02-í”„ë¡œì íŠ¸-ê°œìš”.md)
- [ê¸°ìˆ  ìŠ¤íƒ](./03-ê¸°ìˆ -ìŠ¤íƒ.md)
- [ì‚¬ìš©ì ê°€ì´ë“œ](./05-ì‚¬ìš©ì-ê°€ì´ë“œ.md)
