# ê¸°ìˆ  ìŠ¤íƒ

## ğŸ Python ìƒíƒœê³„

### Python 3.13+
- **ì„ íƒ ì´ìœ **: ìµœì‹  íƒ€ì… íŒíŒ… ê¸°ëŠ¥ ë° ì„±ëŠ¥ ê°œì„ 
- **ì£¼ìš” ê¸°ëŠ¥**:
  - í–¥ìƒëœ íƒ€ì… ì‹œìŠ¤í…œ
  - ë” ë‚˜ì€ ì—ëŸ¬ ë©”ì‹œì§€
  - ì„±ëŠ¥ ìµœì í™”

---

## ğŸ“¦ í•µì‹¬ ë¼ì´ë¸ŒëŸ¬ë¦¬

### 1. yt-dlp
> ìœ íŠœë¸Œ ë™ì˜ìƒ ë‹¤ìš´ë¡œë“œ ì—”ì§„

- **ë²„ì „**: 2024.1.0+
- **ì—­í• **: ìœ íŠœë¸Œ ë° ê¸°íƒ€ í”Œë«í¼ì—ì„œ ë™ì˜ìƒ ë‹¤ìš´ë¡œë“œ
- **ì£¼ìš” ê¸°ëŠ¥**:
  - ë‹¤ì–‘í•œ í¬ë§· ì§€ì›
  - ì¬ìƒëª©ë¡ ì²˜ë¦¬
  - ë©”íƒ€ë°ì´í„° ì¶”ì¶œ
  - ìë§‰ ë‹¤ìš´ë¡œë“œ

**ì‚¬ìš© ì˜ˆì‹œ**:
```python
import yt_dlp

ydl_opts = {
    'format': 'best',
    'outtmpl': '%(title)s.%(ext)s',
}

with yt_dlp.YoutubeDL(ydl_opts) as ydl:
    ydl.download(['https://www.youtube.com/watch?v=...'])
```

### 2. Click
> CLI í”„ë ˆì„ì›Œí¬

- **ë²„ì „**: 8.1.0+
- **ì—­í• **: ëª…ë ¹ì¤„ ì¸í„°í˜ì´ìŠ¤ êµ¬ì¶•
- **ì£¼ìš” ê¸°ëŠ¥**:
  - ëª…ë ¹ì–´ ë° ì˜µì…˜ ì •ì˜
  - ìë™ ë„ì›€ë§ ìƒì„±
  - íƒ€ì… ë³€í™˜ ë° ê²€ì¦
  - ì¤‘ì²© ëª…ë ¹ì–´ ì§€ì›

**ì‚¬ìš© ì˜ˆì‹œ**:
```python
import click

@click.command()
@click.argument('url')
@click.option('--quality', '-q', default='best', help='Video quality')
def download(url: str, quality: str):
    """Download a YouTube video."""
    click.echo(f"Downloading {url} in {quality} quality...")
```

### 3. Rich
> í„°ë¯¸ë„ UI ë¼ì´ë¸ŒëŸ¬ë¦¬

- **ë²„ì „**: 13.7.0+
- **ì—­í• **: ì•„ë¦„ë‹¤ìš´ í„°ë¯¸ë„ ì¶œë ¥ ë° ì§„í–‰ë¥  í‘œì‹œ
- **ì£¼ìš” ê¸°ëŠ¥**:
  - ì§„í–‰ë¥  ë°”
  - í…Œì´ë¸” ë Œë”ë§
  - êµ¬ë¬¸ ê°•ì¡°
  - ìŠ¤í”¼ë„ˆ ì• ë‹ˆë©”ì´ì…˜

**ì‚¬ìš© ì˜ˆì‹œ**:
```python
from rich.progress import Progress

with Progress() as progress:
    task = progress.add_task("[cyan]Downloading...", total=100)
    while not progress.finished:
        progress.update(task, advance=1)
```

### 4. Pydantic
> ë°ì´í„° ê²€ì¦ ë¼ì´ë¸ŒëŸ¬ë¦¬

- **ë²„ì „**: 2.5.0+
- **ì—­í• **: ì„¤ì • ë° ë°ì´í„° ëª¨ë¸ ê²€ì¦
- **ì£¼ìš” ê¸°ëŠ¥**:
  - íƒ€ì… ê²€ì¦
  - ìë™ ë³€í™˜
  - JSON ìŠ¤í‚¤ë§ˆ ìƒì„±
  - í™˜ê²½ ë³€ìˆ˜ ë¡œë“œ

**ì‚¬ìš© ì˜ˆì‹œ**:
```python
from pydantic import BaseModel, Field

class DownloadConfig(BaseModel):
    output_dir: str = Field(default="./downloads")
    quality: str = Field(default="best")
    audio_only: bool = Field(default=False)
```

### 5. Pydantic Settings
> ì„¤ì • ê´€ë¦¬ í™•ì¥

- **ë²„ì „**: 2.1.0+
- **ì—­í• **: í™˜ê²½ ë³€ìˆ˜ ë° ì„¤ì • íŒŒì¼ ê´€ë¦¬
- **ì£¼ìš” ê¸°ëŠ¥**:
  - í™˜ê²½ ë³€ìˆ˜ ìë™ ë¡œë“œ
  - .env íŒŒì¼ ì§€ì›
  - ë‹¤ì¤‘ ì„¤ì • ì†ŒìŠ¤

**ì‚¬ìš© ì˜ˆì‹œ**:
```python
from pydantic_settings import BaseSettings

class Settings(BaseSettings):
    download_dir: str = "./downloads"
    default_quality: str = "1080p"
    
    class Config:
        env_file = ".env"
```

---

## ğŸ›  ê°œë°œ ë„êµ¬

### 1. UV
> ë¹ ë¥¸ Python íŒ¨í‚¤ì§€ ê´€ë¦¬ì

- **ì—­í• **: ì˜ì¡´ì„± ì„¤ì¹˜ ë° ê´€ë¦¬
- **ì¥ì **:
  - Rustë¡œ ì‘ì„±ë˜ì–´ ë§¤ìš° ë¹ ë¦„
  - pip, pip-toolsì™€ í˜¸í™˜
  - ê°€ìƒ í™˜ê²½ ìë™ ê´€ë¦¬

**ì£¼ìš” ëª…ë ¹ì–´**:
```bash
# ì˜ì¡´ì„± ì„¤ì¹˜
uv pip install -r requirements.txt

# ê°œë°œ ì˜ì¡´ì„± ì„¤ì¹˜
uv pip install -e ".[dev]"

# íŒ¨í‚¤ì§€ ì¶”ê°€
uv pip install yt-dlp
```

### 2. Ruff
> ê³ ì„±ëŠ¥ Python ë¦°í„° & í¬ë§¤í„°

- **ë²„ì „**: 0.1.0+
- **ì—­í• **: ì½”ë“œ í’ˆì§ˆ ê²€ì‚¬ ë° í¬ë§¤íŒ…
- **ì¥ì **:
  - Rustë¡œ ì‘ì„±ë˜ì–´ ë§¤ìš° ë¹ ë¦„
  - Flake8, Black, isort ë“±ì„ ëŒ€ì²´
  - ìë™ ìˆ˜ì • ê¸°ëŠ¥

**ì„¤ì • ì˜ˆì‹œ** (`pyproject.toml`):
```toml
[tool.ruff]
line-length = 100
target-version = "py313"

[tool.ruff.lint]
select = ["E", "F", "I", "N", "W"]
ignore = ["E501"]
```

**ì‚¬ìš© ëª…ë ¹ì–´**:
```bash
# ë¦°íŠ¸ ê²€ì‚¬
uv run ruff check .

# ìë™ ìˆ˜ì •
uv run ruff check --fix .

# í¬ë§¤íŒ…
uv run ruff format .
```

### 3. Mypy
> ì •ì  íƒ€ì… ê²€ì‚¬ê¸°

- **ë²„ì „**: 1.7.0+
- **ì—­í• **: íƒ€ì… íŒíŒ… ê²€ì¦
- **ì¥ì **:
  - ëŸ°íƒ€ì„ ì „ íƒ€ì… ì˜¤ë¥˜ ë°œê²¬
  - IDE ìë™ì™„ì„± ê°œì„ 
  - ì½”ë“œ ë¬¸ì„œí™”

**ì„¤ì • ì˜ˆì‹œ** (`pyproject.toml`):
```toml
[tool.mypy]
python_version = "3.13"
strict = true
warn_return_any = true
warn_unused_configs = true
```

**ì‚¬ìš© ëª…ë ¹ì–´**:
```bash
uv run mypy src/
```

### 4. Pytest
> í…ŒìŠ¤íŠ¸ í”„ë ˆì„ì›Œí¬

- **ë²„ì „**: 7.4.0+
- **ì—­í• **: ë‹¨ìœ„ í…ŒìŠ¤íŠ¸ ë° í†µí•© í…ŒìŠ¤íŠ¸
- **ì£¼ìš” ê¸°ëŠ¥**:
  - ê°„ë‹¨í•œ í…ŒìŠ¤íŠ¸ ì‘ì„±
  - Fixture ì§€ì›
  - í”ŒëŸ¬ê·¸ì¸ ìƒíƒœê³„

**í…ŒìŠ¤íŠ¸ ì˜ˆì‹œ**:
```python
import pytest
from youtube_downloader.downloader import Downloader

def test_download_video():
    downloader = Downloader()
    result = downloader.download("https://www.youtube.com/watch?v=...")
    assert result.success is True
```

**ì‚¬ìš© ëª…ë ¹ì–´**:
```bash
# ëª¨ë“  í…ŒìŠ¤íŠ¸ ì‹¤í–‰
uv run pytest

# ì»¤ë²„ë¦¬ì§€ í¬í•¨
uv run pytest --cov=src/youtube_downloader
```

---

## ğŸ“Š ì˜ì¡´ì„± ê´€ë¦¬

### pyproject.toml êµ¬ì¡°
```toml
[project]
name = "youtubedownloadercli"
version = "0.1.0"
description = "A CLI tool for downloading YouTube videos"
readme = "README.md"
requires-python = ">=3.13"
dependencies = [
    "yt-dlp>=2024.1.0",
    "click>=8.1.0",
    "rich>=13.7.0",
    "pydantic>=2.5.0",
    "pydantic-settings>=2.1.0",
]

[project.optional-dependencies]
dev = [
    "pytest>=7.4.0",
    "pytest-cov>=4.1.0",
    "ruff>=0.1.0",
    "mypy>=1.7.0",
]

[project.scripts]
ytdl = "youtube_downloader.cli:main"

[build-system]
requires = ["hatchling"]
build-backend = "hatchling.build"

[tool.ruff]
line-length = 100
target-version = "py313"

[tool.mypy]
python_version = "3.13"
strict = true

[tool.pytest.ini_options]
testpaths = ["tests"]
python_files = ["test_*.py"]
```

---

## ğŸ”„ ê°œë°œ ì›Œí¬í”Œë¡œìš°

### 1. í™˜ê²½ ì„¤ì •
```bash
# Python ë²„ì „ í™•ì¸
python --version  # 3.13+

# ì˜ì¡´ì„± ì„¤ì¹˜
uv pip install -e ".[dev]"
```

### 2. ì½”ë“œ ì‘ì„±
```bash
# ìƒˆ ê¸°ëŠ¥ ê°œë°œ
# src/youtube_downloader/ì—ì„œ ì‘ì—…
```

### 3. ì½”ë“œ í’ˆì§ˆ ê²€ì‚¬
```bash
# í¬ë§¤íŒ…
uv run ruff format .

# ë¦°íŒ…
uv run ruff check --fix .

# íƒ€ì… ê²€ì‚¬
uv run mypy src/
```

### 4. í…ŒìŠ¤íŠ¸
```bash
# ë‹¨ìœ„ í…ŒìŠ¤íŠ¸
uv run pytest tests/

# ì»¤ë²„ë¦¬ì§€ í™•ì¸
uv run pytest --cov=src/youtube_downloader --cov-report=html
```

### 5. ì‹¤í–‰
```bash
# ê°œë°œ ëª¨ë“œë¡œ ì‹¤í–‰
uv run python -m youtube_downloader.cli download <URL>

# ì„¤ì¹˜ í›„ ì‹¤í–‰
ytdl download <URL>
```

---

## ğŸ¯ ê¸°ìˆ  ì„ íƒ ê·¼ê±°

### yt-dlp vs youtube-dl
| íŠ¹ì§• | yt-dlp | youtube-dl |
|------|--------|------------|
| ìœ ì§€ë³´ìˆ˜ | âœ… í™œë°œ | âš ï¸ ëŠë¦¼ |
| ì„±ëŠ¥ | âœ… ë¹ ë¦„ | âŒ ëŠë¦¼ |
| ê¸°ëŠ¥ | âœ… í’ë¶€ | âš ï¸ ê¸°ë³¸ |
| **ì„ íƒ** | **âœ…** | âŒ |

### Click vs Argparse
| íŠ¹ì§• | Click | Argparse |
|------|-------|----------|
| ì‚¬ìš©ì„± | âœ… ì‰¬ì›€ | âš ï¸ ë³µì¡ |
| ê¸°ëŠ¥ | âœ… í’ë¶€ | âš ï¸ ê¸°ë³¸ |
| ë¬¸ì„œ | âœ… ìš°ìˆ˜ | âš ï¸ ë³´í†µ |
| **ì„ íƒ** | **âœ…** | âŒ |

### UV vs pip
| íŠ¹ì§• | UV | pip |
|------|-----|-----|
| ì†ë„ | âœ… ë§¤ìš° ë¹ ë¦„ | âŒ ëŠë¦¼ |
| í˜¸í™˜ì„± | âœ… pip í˜¸í™˜ | âœ… í‘œì¤€ |
| í˜ì‹ ì„± | âœ… ìµœì‹  | âš ï¸ ì „í†µì  |
| **ì„ íƒ** | **âœ…** | âŒ |

---

## ğŸ“š ê´€ë ¨ ë¬¸ì„œ
- [ì‘ì—… ê³„íšì„œ](./01-ì‘ì—…-ê³„íšì„œ.md)
- [í”„ë¡œì íŠ¸ ê°œìš”](./02-í”„ë¡œì íŠ¸-ê°œìš”.md)
- [ê°œë°œ ê°€ì´ë“œ](./04-ê°œë°œ-ê°€ì´ë“œ.md)
- [ì‚¬ìš©ì ê°€ì´ë“œ](./05-ì‚¬ìš©ì-ê°€ì´ë“œ.md)
